#DEFINIR FUSO HORARIO
sudo timedatectl set-timezone America/Sao_Paulo

sudo timedatectl set-timezone America/Asuncion


#instalar aapenel
URL=https://www.aapanel.com/script/install_7.0_en.sh && if [ -f /usr/bin/curl ];then curl -ksSO "$URL" ;else wget --no-check-certificate -O install_7.0_en.sh "$URL";fi;bash install_7.0_en.sh aapanel

#### NOT INSTALL NGINX OR OTHER APPS ####


Guia de Instala√ß√£o
üöÄ Instala√ß√£o Evolution V2
1Ô∏è‚É£ Atualiza√ß√£o do Sistema e Instala√ß√£o de Depend√™ncias
Abra o terminal e execute o seguinte comando:
sudo apt-get update ; apt-get install -y apparmor-utils


2Ô∏è‚É£ Defini√ß√£o do Nome do Servidor
Voc√™ pode substituir manager1 por um nome de sua escolha:
hostnamectl set-hostname manager1


3Ô∏è‚É£ Configura√ß√£o do Arquivo /etc/hosts
Edite o arquivo de hosts com o comando:
nano /etc/hosts

Altere a linha do localhost para o nome definido no passo anterior (exemplo: manager1):
127.0.0.1 manager1

Depois de editar, salve e saia (Ctrl+X, pressione Y e Enter).

4Ô∏è‚É£ Instala√ß√£o do Docker
Execute este comando para instalar o Docker:
curl -fsSL https://get.docker.com | bash


5Ô∏è‚É£ Inicializa√ß√£o do Swarm
Ap√≥s a instala√ß√£o, inicie o Docker Swarm com:

docker swarm leave --force

docker swarm init


6Ô∏è‚É£ Cria√ß√£o da Rede
Agora, crie a rede para os containers:
docker network create --driver=overlay network_public


7Ô∏è‚É£ Configura√ß√£o do Arquivo traefik.yaml
Abra o editor de texto:
nano traefik.yaml

Ap√≥s editar o arquivo, salve e saia (Ctrl+X, pressione Y e Enter).

8Ô∏è‚É£ Implanta√ß√£o do Stack
Por fim, rode o comando abaixo para implantar o Traefik:
docker stack deploy --prune --resolve-image always -c traefik.yaml traefik


9Ô∏è‚É£ Instala√ß√£o do Portainer
Execute o seguinte comando para instalar o Portainer:
docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest --http-enabled


üí° Dica: Verifique se os comandos foram executados corretamente antes de prosseguir para os pr√≥ximos passos.

ip:9000 portainer

@450A...0628....portainer

getstarted- local - stack - postgres

 POSTGRES_PASSWORD=Ma1x1x0x!!Ma1x1x0x!!
 America/Asuncion

 disable acess control
 deploy

 the same with redis, evolution but in this change

# in postgress acess terminal and access user and create db
psql -U chatwoot_database -d chatwoot_database
CREATE EXTENSION IF NOT EXISTS vector;

# in minio access portainer folder and create folder
mkdir -p /var/data/minio

#create buckets login in minio.senaia.in
buckets -> create buckets 
evolution
chatwoot

################ mail google
#access google account (2 factors enabled) in security in search app password or senha app dreate a paste name
# n8n_full copy and past without spaces.

################ N8N #################


conect with postgress and create a n8n database

#Acessar o console do container do Postgres
psql -U chatwoot_database -d chatwoot_database

#Crie o Banco de Dados do N8N
CREATE DATABASE n8n_database;
CREATE DATABASE evolution_database;

# to list all dbs
 \l

#  #### install n8n-evolution-api
#  #settings->plugins->install plugin
#  
#  # n8n-nodes-evolution-api
#  # @devlikeapro/n8n-nodes-chatwoot

## go to docker hub, search for n8n TAGS and take the last version an palace in
# yml files n8nio/n8n:1.111.0

#add STACKS
n8n_editor
n8n_mcp 
n8n_webhook 
n8n_worker 


#  #### install n8n-evolution-api
#  #settings->plugins->install plugin
#  
#  # n8n-nodes-evolution-api
#  # @devlikeapro/n8n-nodes-chatwoot

################ CHATWOOT #################
SECRET_KEY_BASE=194F83A5E420E2898283782FE1E64C2E7C07B5C3F7409BA90138E2D1E658BD77 

# goto minio create a chatwoot api key


################ EVOLUTION #################



############################################################
####### PORTAINER RUNNING IN http://217.79.184.8:9000
####### AND ACCESS FOR https://painel.senaia.in


##### ANTES DE RODAR SENPRE VERIFICAR SE ESTAO LBERADOS DOMINIOS NO DNSCHECKER PARA EVITAR BLOQUEIO ######

####### PORTS IN USE

chatwoot 3030
evolution 8080
redis 6379
postgres 5432
portainer 9000 9001 9443
traefik 8888
n8n 5678
rabbitmq 5672
strapi 1337
supabase 8000
supabase-studio 3032
minio 9000 interno


postgress porta 5432
user chatwoot_database
db chatwoot_database
password Ma1x1x0x!!Ma1x1x0x!!

redis porta 6379
password   J40geWtC08VoaUqoZ      

- MINIO_ROOT_USER=marceluphd
      - MINIO_ROOT_PASSWORD=1:7khB-=2898
      
      # URLs para integra√ß√£o com Traefik
      - MINIO_SERVER_URL=https://files.senaia.in
      - MINIO_BROWSER_REDIRECT_URL=https://minio.senaia.in
      
      gmail password to connect dmaatsjzgzxqxmil
      mardelu.phd

user marcelu.phd@gmail.com
pass @450A...0628....n8n


- N8N_ENCRYPTION_KEY=KRpMlPWMaRCeL0Ehy6sHuYYweuLes4RT

#CHATWOOT
      - STORAGE_ACCESS_KEY_ID=YLBhnYvXT1vsOqlWh9Ml
      - STORAGE_SECRET_ACCESS_KEY=8IvkSaEjjEjAPOzioeIxGQWkKkVFqQUVH97s3UpB
SECRET_KEY_BASE=194F83A5E420E2898283782FE1E64C2E7C07B5C3F7409BA90138E2D1E658BD77 
